"use strict";(self.webpackChunksw_app=self.webpackChunksw_app||[]).push([[592],{6155:(L,u,a)=>{a.d(u,{o:()=>x});var l=a(2340);class c{constructor(t={}){this.name=t.name,this.height=t.height,this.mass=t.mass,this.hair_color=t.hair_color,this.skin_color=t.skin_color,this.eye_color=t.eye_color,this.birth_year=t.birth_year,this.gender=t.gender,this.homeworld=t.homeworld,this.species=t.species,this.vehicles=t.vehicles,this.starships=t.starships,this.films=t.films,this.created=t.created,this.edited=t.edited,this.url=t.url,this.id=t.url.replace("https://swapi.dev/api/people/","").replace("/","")}}class f{constructor(t={}){this.name=t.name,this.model=t.model,this.manufacturer=t.manufacturer,this.cost_in_credits=t.cost_in_credits,this.length=t.length,this.max_atmosphering_speed=t.max_atmosphering_speed,this.crew=t.crew,this.passengers=t.passengers,this.cargo_capacity=t.cargo_capacity,this.consumables=t.consumables,this.hyperdrive_rating=t.hyperdrive_rating,this.MGLT=t.MGLT,this.starship_class=t.starship_class,this.pilots=t.pilots,this.films=t.films,this.created=t.created,this.edited=t.edited,this.url=t.url,this.id=t.url.replace("https://swapi.dev/api/starships/","").replace("/","")}}var h=a(1135),p=a(4004),o=a(4671),g=a(4482),v=a(5403);function b(r,t){return r===t}var m=a(8256),U=a(5105),P=a(7185);const $={selectedStarship:null,starships:{isLoading:!0,list:[],count:0,loaded:!1,error:!1},selectedPerson:null,people:{isLoading:!0,list:[],count:0,loaded:!1,error:!1},selectedFilm:null,films:{isLoading:!0,list:[],count:0,loaded:!1,error:!1}};let x=(()=>{class r extends class y{constructor(t){this.state$=new h.X(t)}get state(){return this.state$.getValue()}select(t){return this.state$.asObservable().pipe((0,p.U)(s=>t(s)),function C(r,t=o.y){return r=r??b,(0,g.e)((s,e)=>{let i,d=!0;s.subscribe((0,v.x)(e,n=>{const S=t(n);(d||!r(i,S))&&(d=!1,i=S,e.next(n))}))})}())}setState(t){this.state$.next({...this.state,...t})}}{constructor(s,e){super($),this.swService=s,this.toastr=e,this.starshipsIsLoading$=this.select(i=>this.state.starships.isLoading),this.starshipsList$=this.select(i=>this.state.starships.list),this.starshipsDetail$=this.select(i=>this.state.selectedStarship),this.starshipLoaded$=this.select(i=>this.state.starships.loaded),this.starshipError$=this.select(i=>this.state.starships.error),this.filmsIsLoading$=this.select(i=>this.state.starships.isLoading),this.filmsList$=this.select(i=>this.state.films.list),this.filmDetail$=this.select(i=>this.state.selectedFilm),this.filmsLoaded$=this.select(i=>this.state.films.loaded),this.filmsError$=this.select(i=>this.state.films.error),this.PeopleIsLoading$=this.select(i=>this.state.people.isLoading),this.peopleList$=this.select(i=>this.state.people.list),this.personDetail$=this.select(i=>this.state.selectedPerson),this.peopleLoaded$=this.select(i=>this.state.people.loaded),this.peopleError$=this.select(i=>this.state.people.error),this.incrementPage=0,this.resultUrl=l.N.baseURL,this.orderCallApi=["","films","starships","people"],this.resultUrls={films:l.N.baseURL,people:l.N.baseURL,planets:l.N.baseURL,species:l.N.baseURL,starships:l.N.baseURL,vehicles:l.N.baseURL},this.firstCall()}firstCall(){this.swService.loadDataWithUrl().subscribe({next:s=>{this.resultUrls=s,this.incrementPage++,this.loadCycleApi(this.orderCallApi[this.incrementPage])},error:s=>{console.log(["error","ha ocurrido un error"]),this.errorSetState("")}})}loadCycleApi(s){this.swService.loadDataWithUrl(this.resultUrls[s]).subscribe({next:e=>{this.filterState(s,e)},error:e=>{this.incrementPage=1,this.errorSetState(s)}})}filterState(s,e){switch(s){case"starships":let i=e.results.map(n=>new f(n));this.setState({...this.state,starships:{list:[...this.state.starships.list,...i],count:e.count,loaded:!0,error:!1,isLoading:!0}}),this.state.starships.list.length==e.count&&this.setState({...this.state,starships:{...this.state.starships,isLoading:!1}}),e.next?(this.resultUrls[s]=e.next,this.loadCycleApi(s)):(this.incrementPage++,this.loadCycleApi(this.orderCallApi[this.incrementPage]));break;case"people":let d=e.results.map(n=>new c(n));this.setState({...this.state,people:{list:[...this.state.people.list,...d],count:e.count,loaded:!0,error:!1,isLoading:!0}}),this.state.people.list.length==e.count&&this.setState({...this.state,people:{...this.state.people,isLoading:!1}}),e.next?(this.resultUrls[s]=e.next,this.loadCycleApi(s)):(this.incrementPage++,this.loadCycleApi(this.orderCallApi[this.incrementPage]));break;case"films":this.setState({...this.state,films:{list:[...this.state.films.list,...e.results],count:e.count,loaded:!0,error:!1,isLoading:!0}}),this.state.films.list.length==e.count&&this.setState({...this.state,films:{...this.state.films,isLoading:!1}}),e.next?(this.resultUrls[s]=e.next,this.loadCycleApi(s)):(this.incrementPage++,this.loadCycleApi(this.orderCallApi[this.incrementPage]))}}errorSetState(s){switch(s){case"starships":this.setState({...this.state,starships:{list:this.state.starships.list,count:this.state.starships.count,loaded:this.state.starships.count>0,error:!0,isLoading:!1}}),this.toastr.error("no se ha podido llamar toda la informaci\xf3n de naves","Error",{timeOut:3e3});break;case"people":this.setState({...this.state,people:{list:this.state.people.list,count:this.state.people.count,loaded:this.state.people.count>0,error:!0,isLoading:!1}}),this.toastr.error("no se ha podido llamar toda la informaci\xf3n de personas","Error",{timeOut:3e3});break;case"films":this.setState({...this.state,films:{list:this.state.films.list,count:this.state.films.count,loaded:this.state.films.count>0,error:!0,isLoading:!1}}),this.toastr.error("no se ha podido llamar toda la informaci\xf3n de peliculas","Error",{timeOut:3e3});break;default:this.setState({starships:{list:this.state.starships.list,count:this.state.starships.count,loaded:this.state.starships.count>0,error:!0,isLoading:!1},people:{list:this.state.people.list,count:this.state.people.count,loaded:this.state.people.count>0,error:!0,isLoading:!1},films:{list:this.state.films.list,count:this.state.films.count,loaded:this.state.films.count>0,error:!0,isLoading:!1}}),this.toastr.error("Ha ocurrido un error con el servicio","Error",{timeOut:3e3})}}setElement(s,e){switch(e){case"starship":default:this.setState({selectedStarship:s});break;case"film":this.setState({selectedFilm:s});break;case"person":this.setState({selectedPerson:s})}}}return r.\u0275fac=function(s){return new(s||r)(m.LFG(U.Q),m.LFG(P._W))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},3962:(L,u,a)=>{a.d(u,{_:()=>f});var l=a(8256),c=a(334);let f=(()=>{class h{constructor(o){this.spinner=o}ngOnInit(){this.spinner.show()}}return h.\u0275fac=function(o){return new(o||h)(l.Y36(c.t2))},h.\u0275cmp=l.Xpm({type:h,selectors:[["app-spinner-loading"]],decls:3,vars:1,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#ffe81f","type","line-scale-party",3,"fullScreen"],[2,"color","#ffe81f"]],template:function(o,g){1&o&&(l.TgZ(0,"ngx-spinner",0)(1,"p",1),l._uU(2,"Cargando"),l.qZA()()),2&o&&l.Q6J("fullScreen",!0)},dependencies:[c.Ro]}),h})()}}]);